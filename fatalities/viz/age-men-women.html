<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Fatalities by Age by Sex, 2003-2018</title>

    <style>
      html, body {
        overflow: hidden;
      }

      #container {
        height: 100vh;
        width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>

  <body>
    <div id="container"></div>

    <pre id="csv" style="display: none">
      Age,Female,Male,"Unknown Gender"
      0,1,1,2
      1,1,1,6
      2,1,2,2
      3,,4,1
      4,3,4,2
      5,,3,3
      6,1,2,1
      7,1,2,2
      8,,3,2
      9,1,2,6
      10,1,,1
      11,1,2,1
      12,1,4,4
      13,,3,3
      14,1,11,4
      15,3,8,15
      16,8,19,25
      17,13,37,18
      18,19,66,34
      19,23,71,28
      20,23,83,24
      21,23,98,41
      22,23,102,25
      23,27,72,25
      24,27,84,18
      25,16,68,19
      26,15,73,15
      27,16,58,7
      28,15,61,8
      29,15,59,9
      30,14,37,6
      31,14,42,7
      32,9,59,7
      33,13,45,9
      34,12,31,8
      35,13,45,8
      36,8,57,4
      37,6,51,5
      38,10,45,10
      39,9,38,6
      40,10,52,7
      41,6,35,
      42,12,37,9
      43,13,61,7
      44,9,37,9
      45,5,39,7
      46,13,56,5
      47,21,50,5
      48,12,54,5
      49,13,57,5
      50,12,57,6
      51,16,56,4
      52,9,48,6
      53,11,51,4
      54,11,35,4
      55,17,44,2
      56,9,40,3
      57,9,39,6
      58,17,39,2
      59,18,28,1
      60,11,30,3
      61,12,27,
      62,15,22,7
      63,14,32,3
      64,10,33,2
      65,12,25,2
      66,6,19,1
      67,12,22,3
      68,8,23,4
      69,10,15,1
      70,7,13,2
      71,10,15,5
      72,10,16,2
      73,10,14,1
      74,6,12,2
      75,14,14,7
      76,11,19,3
      77,6,12,5
      78,6,19,1
      79,14,20,4
      80,6,15,1
      81,8,13,6
      82,8,18,4
      83,8,15,5
      84,4,12,4
      85,17,16,4
      86,8,12,5
      87,6,8,2
      88,10,12,2
      89,3,8,1
      90,5,9,3
      91,4,4,1
      92,3,5,1
      93,3,3,2
      94,1,1,
      95,2,1,1
      96,1,,1
      99,1,,
      100,,1,
    </pre>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://rawgithub.com/phpepe/highcharts-regression/master/highcharts-regression.js?8"></script>

    <script>

    Highcharts.chart('container', {
      chart: {
        type: 'column',
        style: {
          fontFamily: 'Arial',
        }
      },
      credits: {
        enabled: false,
      },
      title: {
        text: 'Crash Fatalities by Age by Sex in 2003-2017'
      },
      subtitle: {
        text: 'Source: UCONN Crash Data'
      },
      xAxis: {
        categories: [],
        crosshair: true
      },
      yAxis: {
        min: 0,
        title: {
          text: 'Fatalities'
        }
      },
      data: {
        csv: document.getElementById('csv').innerHTML,
        //seriesMapping: [{x: 1, y: 2, name: 0}]
      },
      tooltip: {
        headerFormat: '<b>Age {point.x}</b>',
        pointFormat: '<br><br> {point.y} {series.name} fatalities',
        valueDecimals: 0,
        shared: true,
        /*formatter: function() {
          console.log(this)
        }*/
      },
      plotOptions: {
        column: {
          pointPadding: 0,
          borderWidth: 0,
          groupPadding: 0,
        }
      },
      series: [{color: '#7fc97f'}, {color: '#beaed4'}, {color: '#fdc086', visible: false,}]
    });
    </script>


  </body>
</html>
